<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Checkout</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind to use the Inter font and a simple color palette -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#4f46e5', // Indigo-600
                        'secondary': '#f3f4f6', // Gray-100
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar styling for better aesthetics */
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-thumb {
            background-color: #a0aec0; /* Gray-400 */
            border-radius: 4px;
        }
        /* Style for the custom PayPal button provided by the user */
        .pp-ZBXQ4GVARLZA4{
            text-align:center;
            border:none;
            border-radius:0.25rem;
            min-width:11.625rem;
            padding:0 2rem;
            height:2.625rem;
            font-weight:bold;
            background-color:#FFD140;
            color:#000000;
            font-family:"Helvetica Neue",Arial,sans-serif;
            font-size:1rem;
            line-height:1.25rem;
            cursor:pointer;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800">Complete Your Order</h1>
            <p class="text-gray-500 mt-1">Just one step to confirm your shipping details.</p>
        </header>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Shipping Details and Payment Button (2/3 width on large screens) -->
            <div class="lg:col-span-2 bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-100">
                <h2 class="text-xl font-bold text-gray-700 mb-6 border-b pb-3">Shipping Address</h2>
                
                <!-- The form now uses an async submit handler to send data via FormSubmit API -->
                <form id="shippingForm" onsubmit="handlePaymentTransition(event)">
                    
                    <!-- Full Name & Email -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="full_name" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                            <input type="text" id="full_name" name="Full Name" required 
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150" 
                                placeholder="Jane Doe">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                            <input type="email" id="email" name="Email" required 
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150" 
                                placeholder="jane.doe@example.com">
                        </div>
                    </div>

                    <!-- Address Line 1 -->
                    <div class="mb-6">
                        <label for="address_line1" class="block text-sm font-medium text-gray-700 mb-1">Address Line 1 *</label>
                        <input type="text" id="address_line1" name="Address Line 1" required 
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150" 
                            placeholder="Street address, building name, P.O. box">
                    </div>

                    <!-- Address Line 2 (Optional) -->
                    <div class="mb-6">
                        <label for="address_line2" class="block text-sm font-medium text-gray-700 mb-1">Address Line 2 (Optional)</label>
                        <input type="text" id="address_line2" name="Address Line 2" 
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150" 
                            placeholder="Apartment, suite, unit, floor">
                    </div>

                    <!-- City, State, ZIP/Postal Code -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City *</label>
                            <input type="text" id="city" name="City" required 
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150">
                        </div>
                        
                        <div>
                            <label for="state_province" class="block text-sm font-medium text-gray-700 mb-1">State / Province *</label>
                            <input type="text" id="state_province" name="State/Province" required 
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150">
                        </div>

                        <div>
                            <label for="zip_code" class="block text-sm font-medium text-gray-700 mb-1">ZIP / Postal Code *</label>
                            <input type="text" id="zip_code" name="ZIP/Postal Code" required 
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150">
                        </div>
                    </div>

                    <!-- Country -->
                    <div class="mb-8">
                        <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country / Region *</label>
                        <select id="country" name="Country" required 
                            class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-primary focus:border-primary transition duration-150 appearance-none">
                            <option value="" disabled selected>-- Select a Country --</option>
                            <option value="US">United States</option>
                            <option value="CA">Canada</option>
                            <option value="GB">United Kingdom</option>
                            <option value="AU">Australia</option>
                            <option value="OTH">Other</option>
                        </select>
                    </div>

                    <!-- "Continue to Payment" Button (Default State) -->
                    <button type="submit" id="continueButton"
                            class="w-full flex items-center justify-center p-3 text-lg font-semibold text-white bg-primary rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md">
                        Continue to Payment
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                    </button>

                    <!-- Confirmation Message (Hidden by default) -->
                    <div id="submissionMessage" class="hidden mt-4 p-4 bg-green-100 text-green-700 rounded-lg text-center font-medium">
                        Shipping details confirmed. Redirecting to payment...
                    </div>
                </form>
                
                <!-- PayPal Button Integration (Hidden by Default) -->
                <div id="paypalButtonContainer" class="mt-8 flex justify-center hidden">
                    <div>
                        <form action="https://www.paypal.com/ncp/payment/ZBXQ4GVARLZA4" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
                            <input class="pp-ZBXQ4GVARLZA4" type="submit" value="Buy Now" />
                            <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards" />
                            <section style="font-size: 0.75rem;"> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
                        </form>
                    </div>
                </div>

            </div>

            <!-- Order Summary Sidebar (Prices) -->
            <div class="lg:col-span-1 bg-white p-6 sm:p-6 rounded-xl shadow-lg border border-gray-100 h-fit sticky top-6">
                <h3 class="text-xl font-bold text-gray-700 mb-4 border-b pb-3">Order Summary</h3>
                <div class="space-y-3 text-gray-600">
                    <div class="flex justify-between">
                        <span>Subtotal (1 item)</span>
                        <span class="font-medium">$14.99</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Shipping Estimate</span>
                        <span class="font-medium text-green-600">FREE</span>
                    </div>
                    <div class="flex justify-between border-t pt-4">
                        <span class="text-lg font-bold text-gray-800">Order Total</span>
                        <span class="text-lg font-bold text-primary">$14.99</span>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // The URL for the FormSubmit AJAX endpoint, using your email.
        const FORMSUBMIT_URL = "https://formsubmit.co/ajax/synaptix@mail.com";

        async function handlePaymentTransition(event) {
            event.preventDefault(); // Stop normal form submission

            const form = document.getElementById('shippingForm');
            const continueButton = document.getElementById('continueButton');
            const paypalButtonContainer = document.getElementById('paypalButtonContainer');
            const submissionMessage = document.getElementById('submissionMessage');

            // 1. Prepare Data for Internal Submission
            const formData = new FormData(form);
            
            // Add FormSubmit specific fields for a clean email submission
            formData.append('_subject', 'New Order Shipping Details');
            // Adding a summary to the data to ensure it appears in the email
            formData.append('Order Summary', 'Item: $14.99, Shipping: FREE, Total: $14.99');
            
            // Show loading state
            continueButton.innerHTML = `<svg class="animate-spin w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356-2A8.001 8.001 0 004.582 9m0 0H9m11.356 0h.582m-4.789 2.855L17.5 21M9.4 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> Sending Address...`;
            continueButton.disabled = true;

            try {
                // 2. Send Data using Fetch (Internal/Server-less Email)
                const response = await fetch(FORMSUBMIT_URL, {
                    method: 'POST',
                    body: formData,
                });
                
                // Check if the form submission was successful (FormSubmit returns JSON)
                if (response.ok) {
                    // 3. Address Sent: Hide the 'Continue to Payment' button
                    continueButton.classList.add('hidden');
                    
                    // Show confirmation message
                    submissionMessage.classList.remove('hidden');

                    // 4. Wait 3 seconds and show the PayPal button
                    setTimeout(() => {
                        submissionMessage.classList.add('hidden');
                        paypalButtonContainer.classList.remove('hidden');
                    }, 3000); 

                } else {
                    // Handle non-successful FormSubmit response (e.g., rate limit)
                    throw new Error('Form submission failed on the server.');
                }
            } catch (error) {
                console.error('Error submitting form:', error);
                // Revert button state and show error (using the button area for message)
                continueButton.innerHTML = `Error sending address. Please refresh and try again.`;
                continueButton.classList.remove('bg-primary');
                continueButton.classList.add('bg-red-500');
                continueButton.disabled = false; // Allow retry
            }
        }
    </script>
</body>
</html>
